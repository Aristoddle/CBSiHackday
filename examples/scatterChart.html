<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <link href="../build/nv.d3.css" rel="stylesheet" type="text/css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.2/d3.min.js" charset="utf-8"></script>
  <script src="../build/nv.d3.js"></script>

  <style>
  text {
    font: 12px sans-serif;
  }
  svg {
    display: block;
  }
  html, body, #test1, svg {
    margin: 0px;
    padding: 0px;
    height: 100%;
    width: 100%;
  }
  </style>
</head>
<body>

  <div id="test1" class='with-3d-shadow with-transitions'>
    <svg></svg>
  </div>

  <script>

  var test =  {"data":[{"story":"Duy Nguyen shared a link.","created_time":"2016-07-26T21:00:27+0000","id":"907754469257568_1314799225219755"},{"message":"https://www.instagram.com/p/BH6zq_dgTFD/ courtesy of Johnson Nguyen","created_time":"2016-07-17T01:15:49+0000","id":"907754469257568_1307932249239786"},{"message":"#weed","story":"Duy Nguyen at Dolores Park San Franisco.","created_time":"2016-07-16T23:25:17+0000","id":"907754469257568_1307883012578043"},{"message":"#2am","story":"Duy Nguyen at 100 Van Ness.","created_time":"2016-07-16T08:44:10+0000","id":"907754469257568_1307430852623259"},{"story":"Duy Nguyen shared UNILAD's video.","created_time":"2016-07-15T20:38:48+0000","id":"907754469257568_1307066252659719"},{"story":"San Francisco Private Group and VIP Segway Tours added a new photo â€” with Haejin Song and 4 others.","created_time":"2016-06-25T00:56:45+0000","id":"907754469257568_1305677899465221"},{"story":"San Francisco Private Group and VIP Segway Tours added a new photo â€” with Haejin Song and 4 others.","created_time":"2016-06-25T00:56:17+0000","id":"907754469257568_1305677946131883"},{"story":"Duy Nguyen shared Matthew Hussey's video.","created_time":"2016-06-14T15:11:46+0000","id":"907754469257568_1285762074790137"},{"message":"I am sitting in my last final right now and I am done with it. I have nothing better to do but to write something on my wall. This spring semester was tough... really tough, not because classes were harder but because I stopped trying. I thought that because I have been through this 9 times already that it was nothing more than another semester. Shiet... it wasn't lol. College is really hard when you don't care about it. Lesson learned... Ok next. Summer, here I coming!!!!!!!!","created_time":"2016-05-19T21:31:22+0000","id":"907754469257568_1268806739819004"},{"story":"Duy Nguyen was live.","created_time":"2016-05-06T18:12:14+0000","id":"907754469257568_1260147304018281"},{"message":"Hi friends, this is a new site I created for class project. I need your help with filling in the content. Please spam the shit out of it! PG13 content only please...\nThank you ðŸ˜Š \n","created_time":"2016-05-05T05:59:11+0000","id":"907754469257568_1259056034127408"},{"story":"Duy Nguyen shared a link.","created_time":"2016-05-01T17:46:20+0000","id":"907754469257568_1256731327693212"},{"message":"The truth","created_time":"2016-04-22T20:30:42+0000","id":"907754469257568_1250842918282053"},{"message":"Living live","story":"Duy Nguyen was live.","created_time":"2016-04-22T20:12:57+0000","id":"907754469257568_1250835918282753"},{"message":"1.4 million for this? That's ridiculous. That's a beginners level app and it could have been done for free...","created_time":"2016-04-07T06:17:48+0000","id":"907754469257568_1240775272622151"},{"message":"First basketball game at the most famous arena :))","story":"Duy Nguyen checked in to Madison Square Garden with Alyssa Vu.","created_time":"2016-04-01T23:13:42+0000","id":"907754469257568_1237054526327559"},{"message":"First timer yer yer","story":"Duy Nguyen with Alyssa Vu at Izakaya MEW.","created_time":"2016-03-31T22:06:27+0000","id":"907754469257568_1236118939754451"},{"message":"LMFAO I laughed for an hour straight, great performances!!","story":"Duy Nguyen with Alyssa Vu at Comedy Cellar.","created_time":"2016-03-31T02:38:34+0000","id":"907754469257568_1235143146518697"},{"message":"Landed! This airport is a long as walk","story":"Duy Nguyen checked in to John F. Kennedy International Airport.","created_time":"2016-03-30T03:02:49+0000","id":"907754469257568_1234031756629836"},{"message":"Spring break 2016","story":"Duy Nguyen checked in to San Francisco International Airport (SFO).","created_time":"2016-03-29T20:07:40+0000","id":"907754469257568_1233737983325880"},{"message":"5 years later. We're still going.","story":"Duy Nguyen with Aaron Lao.","created_time":"2016-03-12T05:37:21+0000","id":"907754469257568_1217691911597154"},{"message":"Aaron Lao ayeeee it's been half a decade already","story":"Duy Nguyen shared a memory.","created_time":"2016-03-11T15:46:26+0000","id":"907754469257568_1217340814965597"},{"message":"Late Xmas present from coworker. I fucking love it! #eatsleepcode","created_time":"2016-01-19T19:16:42+0000","id":"907754469257568_1186612204705125"},{"message":"YO DU weeeeee. what sjsu parking structure has the least or lowest speed bumps? 8(","created_time":"2015-12-15T18:48:52+0000","id":"907754469257568_1166077390091940"},{"message":"Attitude > Knowledge or Hardwork","created_time":"2015-11-20T23:52:56+0000","id":"907754469257568_1154476531252026"}],"paging":{"previous":"https://graph.facebook.com/v2.7/907754469257568/feed?since=1469566827&accesâ€¦7rtZChgtWankgzZAjtuWeZAjFwLjNG3FTzGGXYgVMK8ZBCpTj0ZAgNpAAZDZD&__previous=1","next":"https://graph.facebook.com/v2.7/907754469257568/feed?access_token=EAACEdEosâ€¦eKhMda0IBPnUqHci88zaJCdSjQHr1VBm72PXixpfJrIRLPTFZCnwrGYiNonH4s90bHZBEAZDZD"}}
  var testList = [test, test, test];
  var timeState = 'month';
  var contentState = 'story';
  // register our custom symbols to nvd3
  // make sure your path is valid given any size because size scales if the chart scales.

  // create the chart
  var chart;
  nv.addGraph(function() {
    chart = nv.models.scatterChart()
    .showDistX(false)
    .showDistY(false)
    .useVoronoi(true)
    .color(d3.scale.category10().range())
    .duration(300)
    ;
    chart.dispatch.on('renderEnd', function(){
      console.log('render complete');
    });

    chart.xAxis.tickFormat(d3.format('.02f'));
    chart.xAxis.axisLabel('Time of Day');
    chart.yAxis.tickFormat(d3.format('.02f'));
    chart.yAxis.axisLabel('Metric');


    d3.select('#test1 svg')
    .datum(setToGraph(testList))
    .call(chart);

    nv.utils.windowResize(chart.update);

    chart.dispatch.on('stateChange', function(e) { ('New State:', JSON.stringify(e)); });
    return chart;
  });

  function setToGraph(testList) {
    for (var i = 0; i < testList.length; i++){
      //# groups,# points per group
      // smiley and thin-x are our custom symbols!
      var data = [],
      shapes = ['circle', 'cross'],
      monthName = ['Jan', 'Feb', 'Mar'];
      for (i = 0; i < 4; i++) {
        data.push({
          key: 'Group ' + i,
          values: []
        });

        data[i].values.push({
          x: parseDate(test),
          y: parseParam(testList[i], contentState),
          //we can use this to change the size of a block
          size: Math.round(Math.random() * 100) / 100,
          shape: shapes[1]
        });
      }
      return data;
    }

    function parseDate(obj){
      if (timeState == 'month') {
        return parseMonth(obj);
      } else return parseYear(obj)
    }
    //pulls month published
    function parseMonth(obj) {
      var formated = obj.data[0].created_time;
      return parseInt((formated.substring(5,7)));
    }

    //pulls year published
    function parseYear(obj) {
      var formated = obj.data[0].created_time;
      console.log(parseInt((formated.substring(0,4))));
      return parseInt((formated.substring(0,4)));
    }

    function parseParam(obj, param) {
      return Math.random()*100;
      /*switch(param){
      case 'story':
      return (obj.data[0].story)
      break;
      case 'created_time':
      return (obj.data[0].message)
      break;
    }
    */
  }
}
  </script>
</body>
</html>
